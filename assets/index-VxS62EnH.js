var x=o=>{throw TypeError(o)};var F=(o,t,e)=>t.has(o)||x("Cannot "+e);var n=(o,t,e)=>(F(o,t,"read from private field"),e?e.call(o):t.get(o)),c=(o,t,e)=>t.has(o)?x("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(o):t.set(o,e),i=(o,t,e,r)=>(F(o,t,"write to private field"),r?r.call(o,e):t.set(o,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function e(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=e(a);fetch(a.href,s)}})();var f,h;class H{constructor(t,e){c(this,f);c(this,h);i(this,f,t),i(this,h,e)}set name(t){i(this,h,t)}get name(){return n(this,h)}get id(){return n(this,f)}}f=new WeakMap,h=new WeakMap;var g;class K{constructor(){c(this,g);i(this,g,[]),this.loadCategoriesFromLocalStorage()}get categories(){return n(this,g)}getCategoryById(t){return n(this,g).find(e=>e.id===t)}addCategory(t){this.categories.push(t)}loadCategoriesFromLocalStorage(){localStorage.getItem("categories")!==null&&JSON.parse(localStorage.getItem("categories")).forEach(e=>{let r=new H(e.catId,e.name);this.addCategory(r),this.renderCategories()})}renderCategories(){let t=document.getElementById("categories-list"),e=document.getElementById("task-category"),r=document.getElementById("cat-task");t.innerHTML="",e.innerHTML='<option value="">--</option>',r.innerHTML='<option value="">--</option>',n(this,g).forEach((a,s)=>{let l=document.createElement("li");l.textContent=a.name;let m=document.createElement("button");m.innerHTML='<i class="fa-solid fa-trash-can"></i>',m.classList.add("categories__button"),m.setAttribute("title","eliminar"),m.addEventListener("click",()=>{n(this,g).splice(s,1),this.renderCategories(),this.categoriesToLocalStorage()}),l.appendChild(m),t.appendChild(l);let y=document.createElement("option");y.value=a.id,y.textContent=a.name,e.appendChild(y);let p=document.createElement("option");p.value=a.id,p.textContent=a.name,r.appendChild(p)}),this.categoriesToLocalStorage()}categoriesToLocalStorage(){let t=n(this,g).map(e=>({catId:e.id,name:e.name}));localStorage.setItem("categories",JSON.stringify(t))}}g=new WeakMap;var L,C,E,u,T,S;class P{constructor(t,e,r,a,s=!1,l=new Date){c(this,L);c(this,C);c(this,E);c(this,u);c(this,T);c(this,S);i(this,L,t),i(this,C,e),i(this,E,r),i(this,T,a),i(this,u,s),i(this,S,l)}toggleComplete(){i(this,u,!n(this,u))}get id(){return n(this,L)}get title(){return n(this,C)}get description(){return n(this,E)}get category(){return n(this,T)}get completed(){return n(this,u)}get date(){return n(this,S)}}L=new WeakMap,C=new WeakMap,E=new WeakMap,u=new WeakMap,T=new WeakMap,S=new WeakMap;var d;class R{constructor(){c(this,d);i(this,d,[]),this.loadTasksFromLocalStorage()}get tasks(){return n(this,d)}addTask(t){n(this,d).push(t)}removeTask(t){i(this,d,n(this,d).filter(e=>e.id!==t))}getTaskById(t){return n(this,d).find(e=>e.id===t)}getTasksByCategory(t){return n(this,d).filter(e=>e.category.id===t)}loadTasksFromLocalStorage(){localStorage.getItem("tasks")!==null&&JSON.parse(localStorage.getItem("tasks")).forEach(e=>{let r=e.date,a=new Date(r),s=new P(e.id,e.title,e.description,e.category,e.completed,a);this.addTask(s),this.renderTasks()})}renderTasks(t="all"){let e=document.getElementById("tasks-display"),r=document.getElementsByClassName("tasks__header-right")[0];e.innerHTML="",n(this,d).length>0?r.style.display="block":r.style.display="none",n(this,d).map(a=>{let s=document.createElement("div");s.classList.add("tasks__single",a.completed?"complete":"incomplete"),t!=="all"&&a.category.id!==t?s.style.filter="blur(3px)":s.style.filter="none";let l=document.createElement("h3");l.textContent=a.title;let m=document.createElement("p");m.classList.add("tasks__desc");let y=document.createTextNode(a.description);m.appendChild(y);let p=document.createElement("p");p.classList.add("tasks__category");let A=document.createTextNode(a.category.name);p.appendChild(A);let w=document.createElement("p");w.classList.add("tasks__state");let J=a.completed?"completada":"pendiente";w.textContent=J;let D=document.createElement("p");D.classList.add("tasks__date");let q=a.date;D.textContent=q.toLocaleString();let I=document.createElement("div");I.classList.add("tasks__bottom");let v=document.createElement("button");v.innerHTML='<i class="fa-solid fa-check"></i>',v.setAttribute("title","completar"),v.addEventListener("click",()=>{a.toggleComplete(),this.renderTasks()}),I.appendChild(v);let B=document.createElement("button");B.innerHTML='<i class="fa-solid fa-trash-can"></i>',B.setAttribute("title","eliminar"),B.addEventListener("click",()=>{this.removeTask(a.id),this.renderTasks(),this.tasksToLocalStorage()}),I.appendChild(B),s.appendChild(l),s.appendChild(m),s.appendChild(p),s.appendChild(w),s.appendChild(D),s.appendChild(I),e.appendChild(s)}),this.tasksToLocalStorage()}tasksToLocalStorage(){let t=n(this,d).map(e=>({id:e.id,title:e.title,description:e.description,category:{id:e.category.id,name:e.category.name},completed:e.completed,date:e.date}));localStorage.setItem("tasks",JSON.stringify(t))}}d=new WeakMap;let N=document.getElementById("category-form"),j=document.getElementById("category-name"),_=new K;N.addEventListener("submit",o=>{o.preventDefault();let t=Date.now().toString(),e=j.value.trim().toLowerCase();if(_.categories.some(r=>r.name===e))alert("La categorÃ­a ya existe.");else{let r=new H(t,e);_.addCategory(r),_.renderCategories()}N.reset()});let z=document.getElementById("add_task"),k=document.getElementById("task_popup"),G=document.getElementById("close_popup"),O=document.getElementById("task-form"),Q=document.getElementById("task-title"),U=document.getElementById("task-description"),V=document.getElementById("task-category"),b=new R;z.addEventListener("click",()=>{k.style.display="flex"});G.addEventListener("click",()=>{k.style.display="none"});window.addEventListener("click",o=>{o.target===k&&(k.style.display="none")});O.addEventListener("submit",o=>{o.preventDefault();let t=Date.now().toString(),e=Q.value,r=U.value,a=V.value,s=_.getCategoryById(a),l=new P(t,e,r,s);b.addTask(l),b.renderTasks(),console.dir(l),O.reset(),k.style.display="none"});let M=document.getElementById("tasks-by-category"),W=document.getElementById("cat-task"),X=document.getElementById("resetButton");M.addEventListener("submit",o=>{o.preventDefault();let t=W.value;b.renderTasks(t),M.reset()});X.addEventListener("click",()=>{b.renderTasks()});
